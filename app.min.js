async function getWeatherForecastByCoordinates(t,e){try{let o=await(await fetch(`https://api.weatherapi.com/v1/forecast.json?key=9e8a3ffdd02d466eb83212949232703&q=${t},${e}&days=2&lang=cs`)).json();displayWeatherForecast(o),localStorage.setItem("weatherData",JSON.stringify(o))}catch(t){console.error(t),alert("Chyba při získávání počasí. Zkuste to znovu.")}}function isCurrentHour(t){let e=new Date,o=new Date(t);return e.getHours()===o.getHours()&&e.getDate()===o.getDate()&&e.getMonth()===o.getMonth()&&e.getFullYear()===o.getFullYear()}async function getWeatherForecastByCity(t){try{let e=await(await fetch(`https://api.weatherapi.com/v1/forecast.json?key=9e8a3ffdd02d466eb83212949232703&q=${t}&days=2&lang=cs`)).json();displayWeatherForecast(e),localStorage.setItem("weatherData",JSON.stringify(e))}catch(t){console.error(t),alert("Chyba při získávání počasí. Zkuste to znovu.")}}function displayWeatherForecast(t){let e=document.getElementById("weatherInfo"),o=new Date(t.forecast.forecastday[0].date),a=`${o.getDate()}.${o.getMonth()+1}.${o.getFullYear()}`,n=t.forecast.forecastday[0].hour,r="";r+=`<p><strong>Datum (dnes):</strong> ${a}</p>`,r+='<div class="weatherInfo">',n.forEach((t=>{r+=`\n    <div class="forecast ${isCurrentHour(t.time)?"current-hour":""}">\n      <p><strong>Čas:</strong> ${new Date(t.time).toLocaleTimeString("cs-CZ",{hour:"2-digit",minute:"2-digit"})}</p>\n      <p><strong>Teplota:</strong> ${t.temp_c}°C</p>\n      <p><strong>Počasí:</strong> ${t.condition.text}</p>\n    </div>\n  `})),r+="</div>";let s=new Date(t.forecast.forecastday[1].date),c=`${s.getDate()}.${s.getMonth()+1}.${s.getFullYear()}`,i=t.forecast.forecastday[1].hour;r+=`<p><strong>Datum (zítra):</strong> ${c}</p>`,r+='<div class="weatherInfo">',i.forEach((t=>{r+=`\n  <div class="forecast">\n  <p><strong>Čas:</strong> ${new Date(t.time).toLocaleTimeString("cs-CZ",{hour:"2-digit",minute:"2-digit"})}</p>\n  <p><strong>Teplota:</strong> ${t.temp_c}°C</p>\n  <p><strong>Počasí:</strong> ${t.condition.text}</p>\n</div>\n`})),r+="</div>",e.innerHTML=r}async function setLocationToCityInput(t,e){try{let o=(await(await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${t}&longitude=${e}&localityLanguage=cs`)).json()).locality;o?document.getElementById("cityInput").value=o:console.error("Nepodařilo se získat název města.")}catch(t){console.error(t),alert("Nepodařilo se získat název města.")}}document.getElementById("cityForm").addEventListener("submit",(t=>{t.preventDefault()})),document.getElementById("showWeatherBtn").addEventListener("click",(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((async t=>{let e=t.coords.latitude,o=t.coords.longitude;try{await getWeatherForecastByCoordinates(e,o),await setLocationToCityInput(e,o),document.getElementById("showWeatherBtn").textContent="Získat předpověď počasí podle aktuální polohy",document.body.style.height="150vh"}catch(t){console.error(t),alert("Nepodařilo se získat informace o počasí pro souřadnice.")}}),(t=>{console.error(t),alert("Chyba při získávání polohy. Zkuste to znovu.")})):alert("Geolokace není podporována tímto zařízením.")})),document.querySelector("#cityForm button").addEventListener("click",(async()=>{let t=document.getElementById("cityInput").value;if(t)try{await getWeatherForecastByCity(t),document.body.style.height="150vh"}catch(t){console.error(t),alert("Nepodařilo se získat informace o počasí pro zadané město.")}else alert("Zadejte název města.")}));